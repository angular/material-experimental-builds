{"version":3,"file":"mdc-snack-bar.js","sources":["../../../../../../src/material-experimental/mdc-snack-bar/simple-snack-bar.ts","../../../../../../src/material-experimental/mdc-snack-bar/snack-bar-container.ts","../../../../../../src/material-experimental/mdc-snack-bar/snack-bar-content.ts","../../../../../../src/material-experimental/mdc-snack-bar/module.ts","../../../../../../src/material-experimental/mdc-snack-bar/snack-bar.ts","../../../../../../src/material-experimental/mdc-snack-bar/public-api.ts","../../../../../../src/material-experimental/mdc-snack-bar/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ChangeDetectionStrategy, Component, Inject, ViewEncapsulation} from '@angular/core';\nimport {\n  MAT_SNACK_BAR_DATA,\n  TextOnlySnackBar,\n  MatSnackBarRef,\n  SimpleSnackBar\n} from '@angular/material/snack-bar';\n\n@Component({\n  selector: 'mat-simple-snack-bar',\n  templateUrl: 'simple-snack-bar.html',\n  styleUrls: ['simple-snack-bar.css'],\n  exportAs: 'matSnackBar',\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  host: {\n    'class': 'mat-mdc-simple-snack-bar',\n  }\n})\nexport class MatSimpleSnackBar implements TextOnlySnackBar {\n  constructor(\n      public snackBarRef: MatSnackBarRef<SimpleSnackBar>,\n      @Inject(MAT_SNACK_BAR_DATA) public data: {message: string, action: string}) {\n  }\n\n  /** Performs the action on the snack bar. */\n  action(): void {\n    this.snackBarRef.dismissWithAction();\n  }\n\n  /** If the action button should be shown. */\n  get hasAction(): boolean {\n    return !!this.data.action;\n  }\n}\n\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {\n  BasePortalOutlet,\n  CdkPortalOutlet,\n  ComponentPortal,\n  TemplatePortal\n} from '@angular/cdk/portal';\nimport {\n  AfterViewChecked,\n  ChangeDetectionStrategy,\n  Component,\n  ComponentRef,\n  ElementRef,\n  EmbeddedViewRef,\n  OnDestroy,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {MatSnackBarConfig, _SnackBarContainer} from '@angular/material/snack-bar';\nimport {MDCSnackbarAdapter, MDCSnackbarFoundation} from '@material/snackbar';\nimport {Platform} from '@angular/cdk/platform';\nimport {Observable, Subject} from 'rxjs';\n\n/**\n * The MDC label class that should wrap the label content of the snack bar.\n * @docs-private\n */\nconst MDC_SNACKBAR_LABEL_CLASS = 'mdc-snackbar__label';\n\n/**\n * Internal component that wraps user-provided snack bar content.\n * @docs-private\n */\n@Component({\n  selector: 'mat-mdc-snack-bar-container',\n  templateUrl: 'snack-bar-container.html',\n  styleUrls: ['snack-bar-container.css'],\n  // In Ivy embedded views will be change detected from their declaration place, rather than\n  // where they were stamped out. This means that we can't have the snack bar container be OnPush,\n  // because it might cause snack bars that were opened from a template not to be out of date.\n  // tslint:disable-next-line:validate-decorators\n  changeDetection: ChangeDetectionStrategy.Default,\n  encapsulation: ViewEncapsulation.None,\n  host: {\n    '[attr.role]': '_role',\n    'class': 'mdc-snackbar mat-mdc-snack-bar-container',\n    '[class.mat-snack-bar-container]': 'false',\n    // Mark this element with a 'mat-exit' attribute to indicate that the snackbar has\n    // been dismissed and will soon be removed from the DOM. This is used by the snackbar\n    // test harness.\n    '[attr.mat-exit]': `_exiting ? '' : null`,\n  }\n})\nexport class MatSnackBarContainer extends BasePortalOutlet\n    implements _SnackBarContainer, AfterViewChecked, OnDestroy {\n  /** Subject for notifying that the snack bar has exited from view. */\n  readonly _onExit: Subject<void> = new Subject();\n\n  /** Subject for notifying that the snack bar has finished entering the view. */\n  readonly _onEnter: Subject<void> = new Subject();\n\n  /** ARIA role for the snack bar container. */\n  _role: 'alert' | 'status' | null;\n\n  /** Whether the snack bar is currently exiting. */\n  _exiting = false;\n\n  private _mdcAdapter: MDCSnackbarAdapter = {\n    addClass: (className: string) => this._setClass(className, true),\n    removeClass: (className: string) => this._setClass(className, false),\n    announce: () => {},\n    notifyClosed: () => {\n      this._onExit.next();\n      this._mdcFoundation.destroy();\n    },\n    notifyClosing: () => {},\n    notifyOpened: () => this._onEnter.next(),\n    notifyOpening: () => {},\n  };\n\n  _mdcFoundation = new MDCSnackbarFoundation(this._mdcAdapter);\n\n  /** The portal outlet inside of this container into which the snack bar content will be loaded. */\n  @ViewChild(CdkPortalOutlet, {static: true}) _portalOutlet: CdkPortalOutlet;\n\n  /** Element that acts as the MDC surface container which should contain the label and actions. */\n  @ViewChild('surface', {static: true}) _surface: ElementRef;\n\n  /**\n   * Element that will have the `mdc-snackbar__label` class applied if the attached component\n   * or template does not have it. This ensures that the appropriate structure, typography, and\n   * color is applied to the attached view.\n   */\n  @ViewChild('label', {static: true}) _label: ElementRef;\n\n  constructor(\n      private _elementRef: ElementRef<HTMLElement>,\n      public snackBarConfig: MatSnackBarConfig,\n      private _platform: Platform) {\n    super();\n\n    // Based on the ARIA spec, `alert` and `status` roles have an\n    // implicit `assertive` and `polite` politeness respectively.\n    if (snackBarConfig.politeness === 'assertive' && !snackBarConfig.announcementMessage) {\n      this._role = 'alert';\n    } else if (snackBarConfig.politeness === 'off') {\n      this._role = null;\n    } else {\n      this._role = 'status';\n    }\n\n    // `MatSnackBar` will use the config's timeout to determine when the snack bar should be closed.\n    // Set this to `-1` to mark it as indefinitely open so that MDC does not close itself.\n    this._mdcFoundation.setTimeoutMs(-1);\n  }\n\n  ngAfterViewChecked() {\n    // Check to see if the attached component or template uses the MDC template structure,\n    // specifically the MDC label. If not, the container should apply the MDC label class to this\n    // component's label container, which will apply MDC's label styles to the attached view.\n    if (!this._label.nativeElement.querySelector(`.${MDC_SNACKBAR_LABEL_CLASS}`)) {\n      this._label.nativeElement.classList.add(MDC_SNACKBAR_LABEL_CLASS);\n    } else {\n      this._label.nativeElement.classList.remove(MDC_SNACKBAR_LABEL_CLASS);\n    }\n  }\n\n  /** Makes sure the exit callbacks have been invoked when the element is destroyed. */\n  ngOnDestroy() {\n    this._mdcFoundation.close();\n  }\n\n  enter() {\n    // MDC uses some browser APIs that will throw during server-side rendering.\n    if (this._platform.isBrowser) {\n      this._mdcFoundation.open();\n    }\n  }\n\n  exit(): Observable<void> {\n    this._exiting = true;\n    this._mdcFoundation.close();\n    return this._onExit;\n  }\n\n  /** Attach a component portal as content to this snack bar container. */\n  attachComponentPortal<T>(portal: ComponentPortal<T>): ComponentRef<T> {\n    this._assertNotAttached();\n    this._applySnackBarClasses();\n    return this._portalOutlet.attachComponentPortal(portal);\n  }\n\n  /** Attach a template portal as content to this snack bar container. */\n  attachTemplatePortal<C>(portal: TemplatePortal<C>): EmbeddedViewRef<C> {\n    this._assertNotAttached();\n    this._applySnackBarClasses();\n    return this._portalOutlet.attachTemplatePortal(portal);\n  }\n\n  private _setClass(cssClass: string, active: boolean) {\n    const classList = this._elementRef.nativeElement.classList;\n    active ? classList.add(cssClass) : classList.remove(cssClass);\n  }\n\n  /** Applies the user-configured CSS classes to the snack bar. */\n  private _applySnackBarClasses() {\n    const panelClasses = this.snackBarConfig.panelClass;\n    if (panelClasses) {\n      if (Array.isArray(panelClasses)) {\n        // Note that we can't use a spread here, because IE doesn't support multiple arguments.\n        panelClasses.forEach(cssClass => this._setClass(cssClass, true));\n      } else {\n        this._setClass(panelClasses, true);\n      }\n    }\n  }\n\n  /** Asserts that no content is already attached to the container. */\n  private _assertNotAttached() {\n    if (this._portalOutlet.hasAttached()) {\n      throw Error('Attempting to attach snack bar content after content is already attached');\n    }\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Directive} from '@angular/core';\n\n/** Directive that should be applied to the text element to be rendered in the snack bar. */\n@Directive({\n  selector: `[matSnackBarLabel]`,\n  host: {\n    'class': 'mat-mdc-snack-bar-label mdc-snackbar__label',\n  }\n})\nexport class MatSnackBarLabel {}\n\n/** Directive that should be applied to the element containing the snack bar's action buttons. */\n@Directive({\n  selector: `[matSnackBarActions]`,\n  host: {\n    'class': 'mat-mdc-snack-bar-actions mdc-snackbar__actions',\n  }\n})\nexport class MatSnackBarActions {}\n\n/** Directive that should be applied to each of the snack bar's action buttons. */\n@Directive({\n  selector: `[matSnackBarAction]`,\n  host: {\n    'class': 'mat-mdc-snack-bar-action mdc-snackbar__action',\n  }\n})\nexport class MatSnackBarAction {}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {OverlayModule} from '@angular/cdk/overlay';\nimport {PortalModule} from '@angular/cdk/portal';\nimport {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {MatButtonModule} from '@angular/material/button';\nimport {MatCommonModule} from '@angular/material/core';\n\nimport {MatSimpleSnackBar} from './simple-snack-bar';\nimport {MatSnackBarContainer} from './snack-bar-container';\nimport {\n  MatSnackBarAction,\n  MatSnackBarActions,\n  MatSnackBarLabel\n} from './snack-bar-content';\n\n@NgModule({\n  imports: [\n    OverlayModule,\n    PortalModule,\n    CommonModule,\n    MatButtonModule,\n    MatCommonModule,\n  ],\n  exports: [\n    MatCommonModule,\n    MatSnackBarContainer,\n    MatSnackBarLabel,\n    MatSnackBarActions,\n    MatSnackBarAction,\n  ],\n  declarations: [\n    MatSimpleSnackBar,\n    MatSnackBarContainer,\n    MatSnackBarLabel,\n    MatSnackBarActions,\n    MatSnackBarAction,\n  ],\n  entryComponents: [\n    MatSimpleSnackBar,\n    MatSnackBarContainer,\n  ],\n})\nexport class MatSnackBarModule {\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable} from '@angular/core';\nimport {MatSnackBar as BaseMatSnackBar} from '@angular/material/snack-bar';\nimport {MatSnackBarModule} from './module';\nimport {MatSimpleSnackBar} from './simple-snack-bar';\nimport {MatSnackBarContainer} from './snack-bar-container';\n\n/**\n * Service to dispatch Material Design snack bar messages.\n */\n@Injectable({providedIn: MatSnackBarModule})\nexport class MatSnackBar extends BaseMatSnackBar {\n  protected simpleSnackBarComponent = MatSimpleSnackBar;\n  protected snackBarContainerComponent = MatSnackBarContainer;\n  protected handsetCssClass = 'mat-mdc-snack-bar-handset';\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport * from './simple-snack-bar';\nexport * from './snack-bar-container';\nexport * from './snack-bar-content';\nexport * from './snack-bar';\nexport * from './module';\n\nexport {\n  MatSnackBarConfig,\n  MatSnackBarRef,\n  SimpleSnackBar,\n  MAT_SNACK_BAR_DATA,\n  MAT_SNACK_BAR_DEFAULT_OPTIONS,\n} from '@angular/material/snack-bar';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["BaseMatSnackBar"],"mappings":"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"}